(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(t,e,n){},110:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(44),s=n.n(i),c=(n(54),n(13)),o=n(112),u=n(109),l=n(115),m=n(113),h=n(114),p=n(18),d=n(12),f=n(2),g=n(9),b=n(5),v=n(4),E=n(6),j=n(15),O=n.n(j),w=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(b.a)(this,Object(v.a)(e).call(this,t))).onQuiz=function(){n.props.onCurrentElementChange("quiz")},n.state={},n}return Object(E.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){var t=this.props.lecture;return O()(t)?r.a.createElement("div",null):r.a.createElement("div",{style:{maxWidth:"1180px"},className:"column"},r.a.createElement("h2",{className:"title is-4"},t.title),t.chapters.map(function(t){return r.a.createElement("div",{key:t.title,className:"column"},r.a.createElement("h2",{className:"subtitle is-5"},t.title),r.a.createElement("p",null,t.text))}),r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column is-2"},r.a.createElement("button",{onClick:this.onQuiz,className:"button is-link"},"\u041f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442"))))}}]),e}(a.Component),y=Object(c.b)(function(t){return{lecture:t.lecture}})(w),C=n(48),N=n(17),k=n.n(N),x=function t(){Object(f.a)(this,t)};x.getLecture=function(t){return k.a.get("/lectures/".concat(t)).then(function(t){return t.data})},x.sendAnswer=function(t,e){return k.a.post("/quizzes",Object(d.a)({},e),{params:{session:t}}).then(function(t){return t.data})};var _=x,S=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(b.a)(this,Object(v.a)(e).call(this,t))).onChangeAnswer=function(t,e){n.state.questions.some(function(t){return t.questionId===e})?n.setState({questions:n.state.questions.map(function(n){return n.questionId===e?{answerId:t,questionId:e}:n})}):n.setState({questions:Object(C.a)(n.state.questions).concat([{answerId:t,questionId:e}])})},n.onQuiz=function(){var t=n.props.lecture.id,e=JSON.parse(localStorage.getItem("education_recourse_session")).session,a={lectureId:t,questions:n.state.questions};_.sendAnswer(e,a).then(function(t){return n.props.onAnswerChange(t)}).then(function(){return n.props.history.push("".concat(n.props.match.url,"/answer"))}).then(function(){return n.props.onCurrentElementChange("answer")})},n.state={questions:[]},n}return Object(E.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){var t=this,e=this.props.lecture;return O()(e)?r.a.createElement("div",null):r.a.createElement("div",{className:"column is-fullwidth"},r.a.createElement("h2",{className:"title is-4"},e.title),e.questions.map(function(e){return r.a.createElement("div",{key:e.id,className:"column"},r.a.createElement("h2",{className:"subtitle is-5"},"".concat(e.id,". ").concat(e.text)),r.a.createElement("div",{className:"control"},r.a.createElement("form",null,e.answers.map(function(n){return r.a.createElement("label",{key:n.id,className:"radio"},r.a.createElement("input",{onChange:function(){return t.onChangeAnswer(n.id,e.id)},type:"radio",name:"answer"}),n.text)}))))}),r.a.createElement("button",{onClick:this.onQuiz,className:"button is-link"},"\u041f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442"))}}]),e}(a.Component),R=Object(c.b)(function(t){return{lecture:t.lecture}},function(t){return{onAnswerChange:function(e){t({type:"SET_ANSWER",item:e})}}})(S),q=function(t){function e(){var t,n;Object(f.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(b.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(i)))).render=function(){return r.a.createElement("div",{className:"columns is-fullheight is-fullwidth is-centered is-vcentered"},r.a.createElement("div",{className:"column is-3"},r.a.createElement("h2",{className:"title is-4"},"Choose lecture")))},n}return Object(E.a)(e,t),e}(a.Component),z=function t(){Object(f.a)(this,t)};z.getSession=function(t){var e=t.name,n=t.group;return k.a.post("/profiles",{name:e,group:n}).then(function(t){return t.data})},z.getProfile=function(t){return k.a.get("/profiles",{params:{session:t}}).then(function(t){return t.data})};var A=z,I=n(8),D=function(t){function e(){return Object(f.a)(this,e),Object(b.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(E.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.size[0]/12,e=this.props.size[1]/12,n=Math.min(t,e)/2,a=I.h(I.i),r=this.props.result.results,i=5-r,s=I.e().value(function(t){return t}).sort(null),c=I.a().innerRadius(n-this.props.innerRadius/12).outerRadius(n-20/12);I.j(this.pieChart).attr("width",t).attr("height",e).append("g").attr("transform","translate("+t/2+","+e/2+")").datum([r,i]).selectAll("path").data(s).enter().append("path").attr("fill",function(t,e){return a(e)}).attr("d",c)}},{key:"render",value:function(){var t=this;return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",ref:function(e){return t.pieChart=e}})}}]),e}(a.Component),L=n(20),T=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(b.a)(this,Object(v.a)(e).call(this,t))).margin={top:20,right:50,bottom:50,left:50},n.xAxisHeight=2,n.mainColor="#9fc4ee",n.update=n.update.bind(Object(L.a)(Object(L.a)(n))),n}return Object(E.a)(e,t),Object(g.a)(e,null,[{key:"rightRoundedRect",value:function(t,e,n,a,r){return"M".concat(t,",").concat(e+a,"v").concat(r-a,"a").concat(r,",").concat(r," 0 0 1 ").concat(r,",").concat(-r,"h").concat(n-2*r,"a").concat(r,",").concat(r," 0 0 1 ").concat(r,",").concat(r,"v").concat(a-r,"h").concat(n,"z")}}]),Object(g.a)(e,[{key:"componentDidMount",value:function(){var t=this.margin;this.width=800,this.height=4*this.width/7-this.margin.top-this.margin.bottom,I.j(this.histogram).style("width","".concat(this.width+t.left,"px")),this.update()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.update()}},{key:"update",value:function(){var t=this.margin,n=this.width,a=this.height,r=this.xAxisHeight,i=this.mainColor,s=this.props,c=s.chart,o=s.patientNodeColor,u=s.closestPatientNode,l=s.currentPatientValue,m={values:Object.keys(c.values).map(function(t){return{value:t,count:c.values[t]}})};function h(e){g.html('<span class="histogram__tooltip-amount">'.concat(l.toFixed(3),'</span>\n          <span class="histogram__tooltip-row histogram__tooltip-title">Current patient</span>')).style("left","".concat(d(e.value)+t.left+(d(e.value)<5*d.bandwidth()?40:0)+d.bandwidth()/2-function(t){return n-t<5*d.bandwidth()?40:0}(d(e.value))+-g.node().getBoundingClientRect().width/2,"px"))}I.j(this.histogram).selectAll("*").remove();var p=I.j(this.histogram).attr("width",n+t.left+t.right).attr("height",a+t.top+t.bottom).append("g").attr("transform","translate(".concat(t.left,", ").concat(t.top,")")),d=I.f().rangeRound([0,n]).paddingInner(.2),f=I.g().range([a,0]);d.domain(m.values.map(function(t){return t.value})),f.domain([0,I.d(m.values,function(t){return t.count})]).nice();var g=I.j(this.histogramTooltip);p.append("g").attr("class","grid").attr("transform","translate(0,".concat(a,")")).call(I.b(d).tickFormat(function(t,e){return e%4===0?t:null}).tickPadding(8).tickSize(5)),p.append("g").attr("class","grid").call(I.c(f).ticks(4).tickPadding(10).tickSize(-n)),p.append("text").attr("class","axis-title").attr("x",n/2).attr("y",a).attr("dy","2.75em").style("text-anchor","middle").text(m.xaxisLabel),p.append("text").attr("class","axis-title").attr("transform","rotate(-90)").attr("y",-t.left).attr("x",-a/2).attr("dy","1em").style("text-anchor","middle").text(m.yaxisLabel);var b=p.append("g").selectAll("g").data(m.values).enter().append("g").attr("class","histogram__chain-group");b.append("path").attr("class","histogram__background-bar").attr("d",function(t){return e.rightRoundedRect(d(t.value),f(t.count),d.bandwidth(),a-f(t.count),3)}).attr("fill","#ffffff"),b.append("path").attr("class","histogram__bar").attr("d",function(t){return e.rightRoundedRect(d(t.value),f(t.count),d.bandwidth(),a-f(t.count),3)}).attr("fill",function(t){return t.value===u.value?o:i}).style("opacity",.75),b.filter(function(t){return t.value===u.value}).append("line").attr("stroke","#1b2834").attr("stroke-dasharray",6).attr("x1",function(t){return d(t.value)+d.bandwidth()/2}).attr("y1",-20).attr("x2",function(t){return d(t.value)+d.bandwidth()/2}).attr("y2",function(t){return f(t.count)}).each(function(t){h(t)}),p.append("rect").attr("transform","translate(0,".concat(a,")")).attr("width",n).attr("height",r).attr("fill","#9bbce6")}},{key:"render",value:function(){var t=this,e=this.props.chartTitle;return r.a.createElement("div",{className:"histogram"},r.a.createElement("div",{className:"histogram__title-container",ref:function(e){return t.titleContainer=e}},r.a.createElement("div",{className:"histogram__title"},e)),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",ref:function(e){return t.histogram=e}}),r.a.createElement("div",{className:"histogram__tooltip",ref:function(e){return t.histogramTooltip=e}}))}}]),e}(a.Component),P=function(t){function e(){return Object(f.a)(this,e),Object(b.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(E.a)(e,t),Object(g.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"column is-fullwidth"},r.a.createElement(D,{size:[5e3,5e3],innerRadius:250,result:{results:this.props.answer.results.filter(function(t){return!0===t}).length}}),r.a.createElement("div",{className:"biomarkers-details-page__section"},r.a.createElement(T,{chart:{values:this.props.answer.statistics},closestPatientNode:1,patientNodeColor:1,currentPatientValue:1,chartTitle:"Students results"})))}}]),e}(a.Component),W=Object(c.b)(function(t){return{answer:t.answer}})(P),M=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(b.a)(this,Object(v.a)(e).call(this,t))).onLectureChange=function(t){_.getLecture(t).then(function(e){n.props.onLectureChange(Object(d.a)({},e,{id:t})),n.setState({currentElement:"lecture"})}).then(function(){return n.props.history.push("".concat(n.props.match.url,"/lecture/").concat(t))})},n.onCurrentElementChange=function(t){n.setState({currentElement:t})},n.onExit=function(){localStorage.clear(),n.props.history.replace("/auth",null)},n.state={},n}return Object(E.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.sessionId;A.getProfile(e).then(function(e){return t.setState(Object(d.a)({},e,{currentElement:"not-chosen"}))})}},{key:"render",value:function(){var t=this,e=this.state,n=e.name,a=e.group,i=e.lectures,s=e.currentElement;return r.a.createElement("div",{style:{position:"absolute"},className:"columns"},r.a.createElement("aside",{style:{borderRight:"1px solid #303f9f",backgroundColor:"rgb(244, 245, 247)",minWidth:"200px",maxWidth:"200px"},className:"menu column is-fullheight"},r.a.createElement("div",{className:"column"},r.a.createElement("h2",{className:"title is-5"},!O()(n)&&n),r.a.createElement("h2",{className:"subtitle is-6"},!O()(a)&&a),r.a.createElement("button",{onClick:this.onExit,className:"button is-small"},"\u0412\u044b\u0439\u0442\u0438")),r.a.createElement("p",{className:"menu-label column is-centered"},"\u041b\u0435\u043a\u0446\u0438\u0438"),r.a.createElement("ul",{className:"menu-list"},!O()(i)&&i.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("a",{onClick:function(){return t.onLectureChange(e.id)},style:{paddingLeft:"30px"},className:"columns"},r.a.createElement(D,{size:[500,500],innerRadius:100,result:{results:e.result}}),r.a.createElement("p",{className:"column"},e.title)))}))),"not-chosen"===s&&r.a.createElement(q,null),"lecture"===s&&r.a.createElement(y,Object.assign({},this.props,{onCurrentElementChange:this.onCurrentElementChange})),"quiz"===s&&r.a.createElement(R,Object.assign({},this.props,{onCurrentElementChange:this.onCurrentElementChange})),"answer"===s&&r.a.createElement(W,Object.assign({},this.props,{onCurrentElementChange:this.onCurrentElementChange})))}}]),e}(a.Component),J=Object(c.b)(null,function(t){return{onLectureChange:function(e){t({type:"SET_LECTURE",item:e})}}})(M),F=n(22),Q=function(t){var e=t.formData,n=e.name,a=e.group,i=(t.formErrors,t.onChange),s=t.onSubmit;return r.a.createElement("div",{style:{position:"absolute"},className:"columns is-fullheight is-fullwidth is-centered is-vcentered"},r.a.createElement("form",{className:"column is-4",action:"submit"},r.a.createElement("h2",{className:"title has-text-centered"},"The Education Recourse"),r.a.createElement("label",{className:"label",htmlFor:"name"},"Name",r.a.createElement("input",{className:"input",value:n,name:"name",onChange:function(t){var e=t.target;return i(e)},type:"text"})),r.a.createElement("label",{className:"label",htmlFor:"group"},"Group",r.a.createElement("input",{className:"input",value:a,name:"group",onChange:function(t){var e=t.target;return i(e)},type:"text"})),r.a.createElement("button",{type:"button",className:"button is-fullwidth is-link",onClick:s},"Submit")))},B=function(t){function e(t){var n;return Object(f.a)(this,e),(n=Object(b.a)(this,Object(v.a)(e).call(this,t))).onChange=function(t){var e=t.name,a=t.value;n.setState({formData:Object(d.a)({},n.state.formData,Object(F.a)({},e,a))})},n.onSubmit=function(){var t=n.state.formData;A.getSession(t).then(function(t){localStorage.setItem("education_recourse_session",JSON.stringify(t)),n.props.history.push("/lectures/".concat(t.session))}).catch(function(t){return console.log(t.response.data)})},n.state={formData:{name:"",group:""},formErrors:[]},n}return Object(E.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){try{var t=JSON.parse(localStorage.getItem("education_recourse_session")).session;this.props.history.push("/lectures/".concat(t))}catch(e){}}},{key:"render",value:function(){var t=this.state,e=t.formData,n=t.formErrors;return r.a.createElement(Q,{formData:e,formErrors:n,onChange:this.onChange,onSubmit:this.onSubmit})}}]),e}(a.Component),U=n(16),H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_LECTURE":return Object(d.a)({},t,e.item);default:return t}},V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ANSWER":return Object(d.a)({},t,e.item);default:return t}},G=Object(U.b)({lecture:H,answer:V}),$=Object(U.c)(G),K=(n(104),n(106),Object(p.a)()),X=Object(h.a)(function(){return r.a.createElement(o.a,null,r.a.createElement(u.a,{exact:!0,path:"/auth",render:function(t){return r.a.createElement(B,t)}}),r.a.createElement(u.a,{path:"/lectures/:sessionId",render:function(t){return r.a.createElement(J,t)}}),r.a.createElement(l.a,{from:"/",to:"/auth"}))}),Y=function(){return r.a.createElement(c.a,{store:$},r.a.createElement(m.a,{history:K},r.a.createElement(X,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},49:function(t,e,n){t.exports=n(110)},54:function(t,e,n){}},[[49,2,1]]]);
//# sourceMappingURL=main.efe34ee2.chunk.js.map